# AI 体育教学系统 - 配置文件

# =============================================================================
# 安全配置
# =============================================================================
security:
  # JWT 密钥 (生产环境务必修改为复杂字符串)
  secret_key: "change_this_in_production"
  # JWT 签名算法
  algorithm: "HS256"
  # Access Token 过期时间 (分钟)
  access_token_expire_minutes: 1440  # 24小时

# =============================================================================
# 数据库配置
# =============================================================================
database:
  # 数据库连接字符串
  # 格式: mysql+pymysql://username:password@host:port/database_name
  url: "mysql+pymysql://root:123456@localhost:3307/aipe_db"

# =============================================================================
# AI 服务配置
# =============================================================================
ai:
  # 是否启用 Mock 模式
  # True: 返回随机关键点数据 (用于测试)
  # False: 使用真实 YOLOv8 Pose 模型识别
  use_mock: false
  
  # YOLO 模型路径 (支持相对路径和绝对路径)
  # 支持的模型: yolov8n-pose.pt, yolov8s-pose.pt, yolov8m-pose.pt 等
  yolo_model_path: "yolov8n-pose.pt"
  
  # YOLO 推理设备
  # "cpu"      : 使用 CPU 推理 (所有电脑都支持)
  # "0"        : 使用第一块 GPU (CUDA)
  # "cuda:0"   : 同上
  # "mps"      : MacOS GPU 加速
  yolo_device: "cpu"
  
  # 抽帧采样率 (每秒采样帧数)
  # 该参数会根据视频 FPS 自动计算采样间隔
  # 示例: 30fps 视频 + sample_fps=6 => 每5帧采样1帧
  # 数值越高 = 更准确但更慢
  # 数值越低 = 更快但可能漏掉动作细节
  sample_fps: 6
  
  # YOLO 置信度阈值 (0.0 - 1.0)
  # 仅保留置信度 >= 该值的关键点检测
  # 值越高越严格,可能漏掉弱检测
  # 值越低越宽松,可能包含噪声
  yolo_confidence: 0.35
  
  # YOLO IOU 阈值 (0.0 - 1.0)
  # 非极大值抑制 (NMS) 参数,用于去除重复检测框
  yolo_iou: 0.7

# =============================================================================
# 评分配置
# =============================================================================
scoring:
  # 是否启用标准动作序列循环
  # True: 当学生视频比标准动作长时,自动循环标准动作序列进行完整评分
  # False: 只评估两个序列的较短长度部分
  enable_sequence_loop: false
  
  # 启用循环的长度比例阈值
  # 当学生视频长度 > 标准动作长度 × 该值时,触发循环
  # 例如: 1.5 表示学生视频比标准动作长50%以上时循环
  loop_threshold: 1.5

# =============================================================================
# 文件存储配置
# =============================================================================
file_storage:
  # 视频上传目录 (相对于项目根目录)
  upload_dir: "uploads/videos"
  
  # 允许的视频格式
  allowed_video_extensions:
    - ".mp4"
    - ".avi"
    - ".mov"
    - ".mkv"
    - ".flv"
  
  # 最大文件大小 (字节) - 500MB
  max_file_size: 524288000

# =============================================================================
# 服务器配置
# =============================================================================
server:
  # REST API 主机
  host: "127.0.0.1"
  # REST API 端口
  port: 8000
  # 是否启用热加载 (开发环境使用)
  reload: true
  # 日志级别: "debug", "info", "warning", "error"
  log_level: "info"
